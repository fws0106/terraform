<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:KaiTi_GB2312;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@KaiTi_GB2312";}
@font-face
	{font-family:"\@SimHei";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:10.0pt;
	line-height:150%;
	text-autospace:none;
	font-size:10.5pt;
	font-family:"Times New Roman",serif;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:10.0pt;
	text-autospace:none;
	font-size:28.0pt;
	font-family:"Cambria",serif;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:10.0pt;
	text-autospace:none;
	font-size:28.0pt;
	font-family:"Cambria",serif;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:10.0pt;
	text-autospace:none;
	font-size:28.0pt;
	font-family:"Cambria",serif;
	letter-spacing:-.5pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:10.0pt;
	text-autospace:none;
	font-size:28.0pt;
	font-family:"Cambria",serif;
	letter-spacing:-.5pt;}
a:link, span.MsoHyperlink
	{color:#EBE2DA;
	text-decoration:underline;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	line-height:150%;
	text-autospace:none;
	font-size:10.5pt;
	font-family:"Times New Roman",serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	line-height:150%;
	text-autospace:none;
	font-size:10.5pt;
	font-family:"Times New Roman",serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	line-height:150%;
	text-autospace:none;
	font-size:10.5pt;
	font-family:"Times New Roman",serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	line-height:150%;
	text-autospace:none;
	font-size:10.5pt;
	font-family:"Times New Roman",serif;}
span.MsoBookTitle
	{letter-spacing:.25pt;
	font-weight:bold;
	font-style:italic;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria",serif;
	letter-spacing:-.5pt;}
.MsoChpDefault
	{font-size:10.0pt;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:30.2pt .5in .5in .5in;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link="#EBE2DA" vlink="#F0F8FE" style='word-wrap:break-word;
text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoTitle style='margin-left:21.0pt'><span class=MsoBookTitle><span
style='font-size:20.0pt;font-style:normal'>Huawei Cloud Resource Provisioning
with Terraform</span></span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b>&nbsp;</b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Introduction</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>This workshop aims to
educate cloud practitioners on the use of Terraform to provision Huawei Cloud
resources. Terraform is an open-source Infrastructure as Code (IaC) tool that
practices a declarative approach which then allows you to define the cloud resources
in human-readable configuration files that you can version, reuse, and share. Terraform
facilitates the management of low-level components such as computing, storage,
and networking resources as well as high-level components like DNS entries and
SaaS features.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Learning Outcomes</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>This workshop provides a
hands-on lab by introducing you to the provisioning of Huawei Cloud resources
with Terraform and Terraform Providers using IaC. It is composed of several
modules in which each module has a different learning objective. Throughout the
workshop, you will be exposed to the HashiCrop Language (HCL), the low-level
syntax of the Terraform language, and the Huawei Cloud provider for Terraform
which leverages the Huawei Cloud control API to provide a set of API actions
required for resource provisioning and managing.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>At the end of the workshop,
you will be able to:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Use Terraform to automate Huawei
Cloud resource provisioning in a declarative way</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Use module blocks to call configuration
files in root modules under a different directory</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Use Terraform to manage resources
in a cloud environment</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Target Audience</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>This workshop has been
developed specifically for the engineers and operators who work on Huawei Cloud
resources. Anyone interested in Terraform is welcome.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Duration</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>On overage, completing all
the labs in this workshop will take around 3 hours.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Prerequisites</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Before entering this
workshop, you should have some familiarity below:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Basic understanding of Huawei
Cloud resources</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Basic understanding of Terraform
command line</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Basic understanding of Terraform
modules</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Getting Started</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Prerequisites</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:#0070C0'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>The following pre-requisite
is required to kick-start the hands-on lab:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>A computer with a stable internet
connection and Terraform installed</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>A Huawei Cloud Testing account
with required IAM least-privilege permissions</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Basic knowledge of Huawei Cloud
and Terraform</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'>&nbsp;</p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Open the
Huawei Cloud console</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>You may navigate to the
Huawei Cloud console via this </span><a
href="https://auth.huaweicloud.com/authui/login.html?locale=en-us&amp;service=https%3A%2F%2Fwww.huaweicloud.com%2Fintl%2Fen-us%2F%23/login"><span
style='font-size:12.0pt;color:#0070C0'>Huawei Cloud Login</span></a><span
style='font-size:12.0pt'>. On the login page, enter the provided temporary
credentials by your administrator to access the console.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=306 id="Picture 17"
src="terraform-workshop_files/image001.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Obtain the
AK/SK for Terraform usage</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>To use Terraform on Huawei
Cloud, you need to have the credential which is access and secret key (AK/SK)
to allow the API requests to be made in Terraform by an IAM user. You may
follow the below guide to obtain your own AK/SK.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>1. On the upper right
corner, select <b>My Credentials</b>.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=166 id="Picture 20"
src="terraform-workshop_files/image002.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>2. In the My Credentials
console, click on Create Access Key. </span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=136 id="Picture 21"
src="terraform-workshop_files/image003.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>3. Enter the AK/SK
description and click on OK button.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=174 id="Picture 22"
src="terraform-workshop_files/image004.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>4. Once the key is
successfully created, download the key and store it on your local machine for
later use.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=152 id="Picture 19"
src="terraform-workshop_files/image005.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Obtain the
Terraform source code</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>You are required to clone
the terraform source code from GitHub on your local machine to be used in this
hands-on lab.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Open the terminal from any
code editor, and enter the below command. </span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>git
clone </span><a
href="https://github.com/hwcloud-apac-pso/hwcloud-terraform-workshop.git"><span
style='font-size:12.0pt;color:#0070C0;background:#D9D9D9'>https://github.com/hwcloud-apac-pso/hwcloud-terraform-workshop.git</span></a></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>You should get a source code
with a similar directory structure as shown below.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'><img
border=0 width=697 height=280 id="Picture 25"
src="terraform-workshop_files/image006.png"></span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;background:#D9D9D9'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Terraform Concepts</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>This section will give you a
brief understanding of high-level Terraform basic concepts and the provider
used for resource provisioning in Huawei Cloud.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;color:#0070C0'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Terraform
Concepts</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Below are some of the common
terms used in Terraform for deployment:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-size:12.0pt'>Modules:</span></b><span
style='font-size:12.0pt'> A module consists of multiple resources that are
grouped together under the same directory. They are reusable blocks that can be
called and reused resource configuration by declaring the required parameters
in multiple environments.</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-size:12.0pt'>Resources:</span></b><span
style='font-size:12.0pt'> Resources are the blocks that typically deploy the
Huawei Cloud resources in your account.</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-size:12.0pt'>Providers:</span></b><span
style='font-size:12.0pt'> Providers abstract the upstream APIs and define the
resources that you will use in your .tf files.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Terraform
Provider</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Terraform supports many
providers for deploying and managing resources. The provider that we will be
focusing on in this workshop is the </span><a
href="https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs/resources/api_gateway_api"><span
style='font-size:12.0pt;color:#0070C0'>Huawei Cloud</span></a><span
style='font-size:12.0pt'> provider. You may obtain detailed documentation on
the Huawei cloud services that are supported by Terraform on this </span><a
href="https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs/resources/api_gateway_api"><span
style='font-size:12.0pt;color:#0070C0'>Huawei Cloud</span></a><span
style='font-size:12.0pt'> website.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Terraform
Command</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Below are some of the useful
commands used in Terraform for deployment:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-size:12.0pt'>terraform init: </span></b><span
style='font-size:12.0pt'>It initializes the working directory containing
Terraform configuration files and installs any required plugins.</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-size:12.0pt'>terraform validate: </span></b><span
style='font-size:12.0pt'>It performs a syntax check on all Terraform files in
the directory specified and displays warnings and errors if any files contain
invalid syntax.</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-size:12.0pt'>terraform plan: </span></b><span
style='font-size:12.0pt'>It enables you to preview the actions Terraform would
take to modify your infrastructure or save a speculative plan which you can
apply later.</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-size:12.0pt'>terraform apply: </span></b><span
style='font-size:12.0pt'>It creates or updates infrastructure depending on the
configuration files.</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;line-height:normal'><b><span style='font-size:
12.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Overall Architecture
Diagram</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>This section provides you with
a quick introduction to the overall cloud architecture that will be provisioned
in this hands-on lab as shown in the diagram below.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'><img border=0 width=697
height=435 id="Picture 24" src="terraform-workshop_files/image007.png"></span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>The cloud architecture is
differentiated into two parts such as network resources and logging and
monitoring resources as explained in the following section.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Network
resources</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>There will be four Virtual
Private Cloud (VPC) to be deployed in the Bangkok region to serve different
purposes as stated below:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Transit VPC to control the ingress
and egress traffic within the cloud environment or between the cloud
environment and the outside world. A NAT gateway will be deployed in production
egress VPC to allow the workloads in other isolated environments (other VPC) to
be able to access the internet.</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>All the shared services such as
Domain Name Service (DNS), Single Sign On (SSO) and etc. will be located in common
service VPC. Common service VPC peers to the transit VPC so that all the
traffic will be routed to the transit VPC before traveling to the destination.</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Production VPC is a place where
all the production workloads such as applications and databases are located. It
is peers to transit VPC so that all the egress traffic will be routed to the
outside world via the NAT gateway. The routing is configured to enable the
production workloads to access shared services via the VPC peering in transit VPC.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Logging and
monitoring resources</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Cloud Trace Service (CTS) is
enabled to perform logging and monitoring. It will report the system/data trace
to the Log Tank Service (LTS) in which you can query the logs in the LTS
console with a user-friendly GUI for auditing purposes. The logs can be
transferred to the Object Storage Service (OBS) bucket for archive purposes
with the encryption of the OBS bucket using Key Management Service (KMS). Key
event notification in CTS is enabled together with the use of the Simple
Message Notification (SMN) service to send an email or SMS alert to the
administrator if there is any critical event occurs. The critical events to be
monitored include the changes in KMS, OBS, VPC, VPN, IAM, and CTS.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Hands-on Lab</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>In this walkthrough, you
will be guided step by step on how to provision multiple resources on the
Huawei Cloud environment.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Insert
Account Information and Credentials</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>1. Search for the
global_vars.tf file under the <b>global-variables-modules</b> directory, insert
the information such as account name, access and secret key, and region where
you want to provision cloud resources. You may refer to this </span><a
href="https://developer.huaweicloud.com/intl/en-us/endpoint"><span
style='font-size:12.0pt;color:#0070C0'>Region and Endpoints</span></a><span
style='font-size:12.0pt'> for available regions and endpoints in Huawei Cloud.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=162 id="Picture 26"
src="terraform-workshop_files/image008.png"><br>
<i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=159 id="Picture 5"
src="terraform-workshop_files/image009.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'>&nbsp;</p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>2. Run the <span
style='color:black;background:#D9D9D9'>terraform apply</span> command to output
all the defined information.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'>&nbsp;</p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Network
Resources Provisioning</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'>&nbsp;</p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Under the <b>hwcloud-terraform-workshop\hfa-core-account-playbook\1.hfa-network-playbook
</b>directory, performs the following action to provision the network resources
including VPC, NAT Gateway, VPC Peering, and configuring the routing:</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>1. Search for the <b>import_global_vars.tf</b>
file, this module is declared to inherit the account information and
credentials from <b>hwcloud-terraform-workshop\global-variables-modules</b>.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=90 id="Picture 30"
src="terraform-workshop_files/image010.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>2. Search for the <b>provider.tf</b>
file to declare the Terraform provider so that Terraform can install and use
them. You may obtain the latest provider version in </span><a
href="https://registry.terraform.io/providers/huaweicloud/huaweicloud/latest/docs/resources/api_gateway_api"><span
style='font-size:12.0pt;color:#0070C0'>Huawei Terraform Provider</span></a><span
style='font-size:12.0pt'>. (Providers are executable plugins that contain code
necessary to interact with the API of the service it was written for.)</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=146 id="Picture 7"
src="terraform-workshop_files/image011.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=275 id="Picture 31"
src="terraform-workshop_files/image012.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>3. Search for the <b>input_local_vars.tf</b>
file to insert the VPC information such as the VPC name, CIDR block, subnets,
NAT gateway name and etc. The NAT gateway is created by default in the egress
VPC. You may use the defined CIDR block for VPC in <b>Overall Architecture
Diagram</b> or decide the range on your own.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=172 id="Picture 1"
src="terraform-workshop_files/image013.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=375 id="Picture 8"
src="terraform-workshop_files/image014.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>4. Search for the <b>vpc.tf </b>file,
these modules are to declare the VPC resources to be provisioned in the cloud
environment by calling the configuration scripts in root modules under <b>hwcloud-terraform-workshop\terraform-hwcloud-modules\terraform-hwcloud-vpc
</b>directory. </span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=229 id="Picture 32"
src="terraform-workshop_files/image015.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>5. Search for the <b>vpc-peering.tf</b>
file, create multiple modules to provision the VPC peering connection in
between transit VPC with other VPC as listed below:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Peering between transit production
ingress VPC and common service VPC</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:15.6pt;margin-right:0in;
margin-bottom:0in;margin-left:.5in;margin-bottom:.0001pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Peering between transit production
egress VPC and common service VPC</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Peering between transit production
ingress VPC and production VPC</span></p>

<p class=MsoListParagraphCxSpLast style='margin-top:15.6pt;margin-right:0in;
margin-bottom:0in;margin-left:.5in;margin-bottom:.0001pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Peering between transit production
egress VPC and production VPC</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>You may need to refer to the
<b>variables.tf</b> file under <b>hwcloud-terraform-workshop\terraform-hwcloud-vpcpeering-single-account</b>
directory to insert the required parameters for the module block.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=287 id="Picture 33"
src="terraform-workshop_files/image016.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=257 id="Picture 9"
src="terraform-workshop_files/image017.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>6. Search for the <b>vpc-peering-nat-routetable.tf</b>
file, configure the route to achieve the connection as below:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Only instance in common service
VPC able to access the internet</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Instance in common service VPC
able to communicate with the instance in production VPC </span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=332 id="Picture 34"
src="terraform-workshop_files/image018.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=331 id="Picture 10"
src="terraform-workshop_files/image019.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>7. Open the terminal, enter
the below commands to initialize the working directory and modules.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>cd
hwcloud-terraform-workshop\hfa-core-account-playbook\1.hfa-core-account-playbook</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>terraform
init</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=322 id="Picture 35"
src="terraform-workshop_files/image020.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>8. Run the <span
style='color:black;background:#D9D9D9'>terraform plan</span> command to view
the resource that will be created on cloud environment.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=203 id="Picture 36"
src="terraform-workshop_files/image021.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>9. Run the <span
style='color:black;background:#D9D9D9'>terraform apply -auto-approve</span>
command to apply the changes to the current infrastructure for resource
provisioning. Once the resource is successfully created, you may verify the
resource creation on the Huawei Cloud console.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=172 id="Picture 37"
src="terraform-workshop_files/image022.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>10. Run the below commands
to provision the ECS instance in common service and production VPC for network
connectivity testing purposes.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>cd
hwcloud-terraform-workshop\hfa-core-account-playbook\Z.hfa-test</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>terraform
init</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>terraform
apply -auto-approve</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=305 id="Picture 39"
src="terraform-workshop_files/image023.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>11. On the Huawei Cloud
console, remote login to both the ECS instance in common service and production
VPC. </span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=201 id="Picture 38"
src="terraform-workshop_files/image024.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Perform the following ping
test and verify the result.</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Ping 8.8.8.8 from common service
ECS instance (expected result: Ping successful)</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Ping 8.8.8.8 from the production
ECS instance (expected result: <span style='color:#EC1567'>Ping unsuccessful</span>)</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:15.6pt;margin-right:0in;
margin-bottom:0in;margin-left:.5in;margin-bottom:.0001pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Ping common service ECS from
production ECS (expected result: Ping successful)</span></p>

<p class=MsoListParagraphCxSpLast style='margin-top:15.6pt;margin-right:0in;
margin-bottom:0in;margin-left:.5in;margin-bottom:.0001pt;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Ping production ECS from common
service ECS (expected result: Ping successful)</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=241 id="Picture 41"
src="terraform-workshop_files/image025.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=255 id="Picture 42"
src="terraform-workshop_files/image026.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Congratulations! You have
done the first part of the lab, let’s move on to the remaining part of this
hands-on lab. </span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;color:#0070C0'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:13.0pt;color:#0070C0'>Logging and
Monitoring Resources Provisioning</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Under the <b>hwcloud-terraform-workshop\hfa-core-account-playbook\2.hfa-logs-playbook
</b>directory, performs the following action to enable the system and data
trace in CTS, and report the trace logs in LTS while storing the logs in the OBS
bucket for archive purposes:</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>1. Search for the <b>input_local_variables.tf</b>
file, insert the retention period of the logs to be stored in the OBS bucket.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=63 id="Picture 43"
src="terraform-workshop_files/image027.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=59 id="Picture 14"
src="terraform-workshop_files/image028.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>2. Search for the <b>cts.tf</b>
file, and create a module to provision a data tracker and OBS bucket. You may
need to refer to the <b>variables.tf</b> file under <b>hwcloud-terraform-workshop\terraform-hwcloud-cts-local</b>
directory to insert the required parameters for the module block.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=114 id="Picture 13"
src="terraform-workshop_files/image029.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=200 id="Picture 46"
src="terraform-workshop_files/image030.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=143 id="Picture 15"
src="terraform-workshop_files/image031.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>3. Open the terminal, and run
the below commands to provision logging and storage resources on the cloud
environment.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>cd
hwcloud-terraform-workshop\hfa-core-account-playbook\2.hfa-logs-playbook</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>terraform
init</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>terraform
apply -auto-approve</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>You may verify the result on
the Huawei Cloud console.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Under the <b>hwcloud-terraform-workshop\hfa-core-account-playbook\3.hfa-notify-playbook
</b>directory, performs the following action to enable and configure the key
event notification in CTS:</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>1. Search for the <b>input_local_variables.tf</b>
file, insert the required information such as email and phone number.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=74 id="Picture 45"
src="terraform-workshop_files/image032.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=73 id="Picture 16"
src="terraform-workshop_files/image033.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>2. Search for the <b>cts-imp-notify.tf</b>
file, and create a module to provision the key event notification resource. You
may need to refer to the <b>variables.tf</b> file under <b>hwcloud-terraform-workshop\terraform-hwcloud-cts-notification</b>
directory to insert the required parameters for the module block.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=144 id="Picture 23"
src="terraform-workshop_files/image034.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=203 id="Picture 47"
src="terraform-workshop_files/image035.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><i><span style='font-size:12.0pt'>Example Result:</span></i></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=698 height=176 id="Picture 18"
src="terraform-workshop_files/image036.jpg"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:12.0pt;background:aqua'>Action
Required</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>3. Open the terminal, and run
the below commands to provision logging and storage resources on the cloud environment.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>cd
hwcloud-terraform-workshop\hfa-core-account-playbook\2.hfa-logs-playbook</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>terraform
init</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt;color:black;background:#D9D9D9'>terraform
apply -auto-approve</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>You may verify the result on
the Huawei Cloud console.</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Resource Cleaning</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>Navigate to the below
directory by following the sequence to delete all the resources when it is no
longer required by using <span style='color:black;background:#D9D9D9'>terraform
destroy -auto-approve</span> command. Open the Huawei Cloud management console
on the browser to make sure that all the resources have been deleted successfully
to avoid any additional charging fees.</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>hwcloud-terraform-workshop\hfa-core-account-playbook\3.hfa-notify-playbook</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>hwcloud-terraform-workshop\hfa-core-account-playbook\2.hfa-logs-playbook</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>hwcloud-terraform-workshop\hfa-core-account-playbook\Z.hfa-test</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>hwcloud-terraform-workshop\hfa-core-account-playbook\1.hfa-network-playbook</span></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><img border=0 width=697 height=285 id="Picture 48"
src="terraform-workshop_files/image037.png"></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><b><span style='font-size:14.0pt'>Conclusion</span></b></p>

<p class=MsoNormal style='margin-left:0in;text-align:justify;text-justify:inter-ideograph;
line-height:normal'><span style='font-size:12.0pt'>In this workshop, we have
created Huawei Cloud resources with the use of Terraform. We learned how to:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Use Terraform to automate Huawei
Cloud resource provisioning in a declarative way</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Use module blocks to call
configuration files in root modules under a different directory</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:.5in;text-align:justify;
text-justify:inter-ideograph;text-indent:-.25in;line-height:normal'><span
style='font-size:12.0pt;font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt'>Use Terraform to manage resources
in a cloud environment</span></p>

</div>

</body>

</html>
